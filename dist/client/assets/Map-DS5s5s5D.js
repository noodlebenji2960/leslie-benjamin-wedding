const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BwvxTK3n.js","assets/chunk-EPOLDU6W-BnKKP6Ue.js","assets/leaflet-src-DGzoi6ic.js","assets/index-CUX0mMyJ.js","assets/leaflet-CIGW-MKW.css","assets/leaflet-routing-machine-Q9NVyIMv.js"])))=>i.map(i=>d[i]);
import{j as a}from"./jsx-runtime-u17CrQMm.js";import{a as i}from"./chunk-EPOLDU6W-BnKKP6Ue.js";import{I as k}from"./Icon-D7gvQNpQ.js";const I="modulepreload",O=function(d){return"/"+d},R={},_=function(u,o,v){let g=Promise.resolve();if(o&&o.length>0){let p=function(s){return Promise.all(s.map(n=>Promise.resolve(n).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");g=p(o.map(s=>{if(s=O(s),s in R)return;R[s]=!0;const n=s.endsWith(".css"),f=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${f}`))return;const e=document.createElement("link");if(e.rel=n?"stylesheet":I,n||(e.as="script"),e.crossOrigin="",e.href=s,l&&e.setAttribute("nonce",l),document.head.appendChild(e),n)return new Promise((L,E)=>{e.addEventListener("load",L),e.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${s}`)))})}))}function y(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return g.then(c=>{for(const l of c||[])l.status==="rejected"&&y(l.reason);return u().catch(y)})},D=({label:d,coordinates:u,extraCoordinates:o,mapUrl:v,width:g="100%",height:y="300px",showRoute:c=!1,interactive:l=!1,zoom:p,style:s})=>{const[n,f]=i.useState(null),[e,L]=i.useState(null),[E,P]=i.useState(!1),m=i.useRef(null),h=i.useRef(null),t=i.useMemo(()=>{if(!u)return null;try{return typeof u=="string"?JSON.parse(u):u}catch(r){return console.error("Map Error: Invalid coordinates format",r),null}},[u]);i.useEffect(()=>{let r=!0;return(async()=>{const[j,M]=await Promise.all([_(()=>import("./index-BwvxTK3n.js"),__vite__mapDeps([0,1,2,3])),_(()=>import("./leaflet-src-DGzoi6ic.js").then(S=>S.l),__vite__mapDeps([2,1])),_(()=>Promise.resolve({}),__vite__mapDeps([4]))]);r&&(f(j),L(M.default))})(),()=>{r=!1}},[]),i.useEffect(()=>{!e||!c||_(()=>import("./leaflet-routing-machine-Q9NVyIMv.js").then(r=>r.l),__vite__mapDeps([5,1])).then(()=>{P(!0)})},[e,c]),i.useEffect(()=>{if(!E||!e||!m.current||!t||!o?.length)return;h.current&&h.current.remove();const r=[e.latLng(t.lat,t.lng),e.latLng(o[0].lat,o[0].lng)];return h.current=e.Routing.control({waypoints:r,addWaypoints:!1,draggableWaypoints:!1,show:!1,createMarker:()=>null,lineOptions:{styles:[{color:"var(--color-primary)",weight:4}]}}).addTo(m.current),()=>{h.current&&h.current.remove()}},[E,e,t,o]);const b=!n||!e||!t,w=i.useMemo(()=>t?o?[{lat:t.lat,lng:t.lng},...o]:[{lat:t.lat,lng:t.lng}]:[],[t,o]),x=i.useMemo(()=>t?p!==void 0?{center:[t.lat,t.lng],zoom:p}:{bounds:w.map(r=>[r.lat,r.lng]),boundsOptions:{padding:[40,40]}}:{},[t,p,w]);return a.jsx("div",{className:"map-container-wrapper",style:{...s,width:g,height:y,position:"relative",overflow:"hidden",borderRadius:"8px"},children:b?a.jsx("div",{className:"map-loading-placeholder",style:{width:"100%",height:"100%",background:"#f8f8f8",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontSize:"0.9rem"},children:a.jsx("span",{children:"Loading Map..."})}):a.jsxs(n.MapContainer,{ref:m,...x,style:{width:"100%",height:"100%"},scrollWheelZoom:!1,dragging:l,zoomControl:l,attributionControl:!1,whenReady:()=>{setTimeout(()=>{m.current&&m.current.invalidateSize()},400)},children:[a.jsx(n.TileLayer,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:""}),a.jsx(n.Marker,{position:[t.lat,t.lng],children:a.jsx(n.Popup,{closeButton:!1,children:v?a.jsxs("a",{href:v,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit",fontWeight:"bold"},children:[d||"View Location"," ",a.jsx(k.ExternalLink,{size:16})]}):d})}),o?.map((r,j)=>r.showMarker!==!1&&a.jsx(n.Marker,{position:[r.lat,r.lng],children:a.jsx(n.Popup,{children:r.label||"Additional location"})},j))]})})};export{D as M};
