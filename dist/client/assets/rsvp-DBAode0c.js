import{a as f,y as pe,w as _e}from"./chunk-EPOLDU6W-BnKKP6Ue.js";import{j as n}from"./jsx-runtime-u17CrQMm.js";import"./LanguageContext-Ds-fbCcn.js";import{I as A}from"./Icon-CCUsaovU.js";import{u as I}from"./useTranslation-B9zSoiKr.js";import{m as E,A as te}from"./proxy-DBX3VoSC.js";class D{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const Te=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},T={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Te()},re=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},Pe=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=re(e);T.publicKey=s.publicKey,T.blockHeadless=s.blockHeadless,T.storageProvider=s.storageProvider,T.blockList=s.blockList,T.limitRate=s.limitRate,T.origin=s.origin||t},ue=async(e,t,s={})=>{const r=await fetch(T.origin+e,{method:"POST",headers:s,body:t}),i=await r.text(),o=new D(r.status,i);if(r.ok)return o;throw o},me=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Oe=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},fe=e=>e.webdriver||!e.languages||e.languages.length===0,he=()=>new D(451,"Unavailable For Headless Browser"),Le=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},Ee=e=>!e.list?.length||!e.watchVariable,ke=(e,t)=>e instanceof FormData?e.get(t):e[t],ye=(e,t)=>{if(Ee(e))return!1;Le(e.list,e.watchVariable);const s=ke(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},ve=()=>new D(403,"Forbidden"),Ce=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},Ae=async(e,t,s)=>{const r=Number(await s.get(e)||0);return t-Date.now()+r},ge=async(e,t,s)=>{if(!t.throttle||!s)return!1;Ce(t.throttle,t.id);const r=t.id||e;return await Ae(r,t.throttle,s)>0?!0:(await s.set(r,Date.now().toString()),!1)},xe=()=>new D(429,"Too Many Requests"),$e=async(e,t,s,r)=>{const i=re(r),o=i.publicKey||T.publicKey,v=i.blockHeadless||T.blockHeadless,y=i.storageProvider||T.storageProvider,x={...T.blockList,...i.blockList},p={...T.limitRate,...i.limitRate};return v&&fe(navigator)?Promise.reject(he()):(me(o,e,t),Oe(s),s&&ye(x,s)?Promise.reject(ve()):await ge(location.pathname,p,y)?Promise.reject(xe()):ue("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},Ie=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},De=e=>typeof e=="string"?document.querySelector(e):e,Fe=async(e,t,s,r)=>{const i=re(r),o=i.publicKey||T.publicKey,v=i.blockHeadless||T.blockHeadless,y=T.storageProvider||i.storageProvider,x={...T.blockList,...i.blockList},p={...T.limitRate,...i.limitRate};if(v&&fe(navigator))return Promise.reject(he());const d=De(s);me(o,e,t),Ie(d);const l=new FormData(d);return ye(x,l)?Promise.reject(ve()):await ge(location.pathname,p,y)?Promise.reject(xe()):(l.append("lib_version","4.4.1"),l.append("service_id",e),l.append("template_id",t),l.append("user_id",o),ue("/api/v1.0/email/send-form",l))},qe={init:Pe,send:$e,sendForm:Fe,EmailJSResponseStatus:D},ne=({index:e,guest:t,onUpdate:s,onRemove:r,onConfirm:i,isDraft:o=!1,isRostered:v=!1})=>{const{t:y}=I(["rsvp"]),[x,p]=f.useState(!1),[d,l]=f.useState(!1),[c,m]=f.useState(!1),u=f.useRef(null),S=t.firstName.trim()&&t.lastName.trim(),R=(g,w)=>{s?.(e,g,w)};return f.useEffect(()=>{t.dietary&&p(!0),t.note&&l(!0)},[t.dietary,t.note]),f.useEffect(()=>{const g=w=>{u.current&&!u.current.contains(w.target)&&m(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),n.jsxs(E.div,{className:`guest-card ${S?"":"invalid"}`,layout:"position",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{type:"spring",stiffness:400,damping:30,layout:{type:"spring",stiffness:500}},children:[n.jsxs("div",{children:[n.jsxs("div",{className:"form-row",children:[n.jsx("input",{type:"text",placeholder:y("rsvp:firstName"),value:t.firstName,onChange:g=>R("firstName",g.target.value)}),n.jsx("input",{type:"text",placeholder:y("rsvp:lastName"),value:t.lastName,onChange:g=>R("lastName",g.target.value)})]}),n.jsxs(te,{children:["// Replace height animations with scaleY + maxHeight",x&&n.jsxs(E.div,{className:"form-row",initial:{opacity:0,scaleY:.8,originY:0},animate:{opacity:1,scaleY:1,transition:{type:"spring",stiffness:400,damping:30}},exit:{opacity:0,scaleY:.8,transition:{duration:.15}},children:[n.jsx("input",{type:"text",placeholder:y("rsvp:dietaryPlaceholder"),value:t.dietary,onChange:g=>R("dietary",g.target.value)}),n.jsx("button",{type:"button",className:"close-btn",onClick:()=>p(!1),children:"×"})]}),d&&n.jsxs(E.div,{className:"form-row",initial:{opacity:0,scaleY:.8,originY:0},animate:{opacity:1,scaleY:1,transition:{type:"spring",stiffness:400,damping:30}},exit:{opacity:0,scaleY:.8,transition:{duration:.15}},children:[n.jsx("textarea",{placeholder:y("rsvp:notePlaceholder"),value:t.note||"",onChange:g=>R("note",g.target.value)}),n.jsx("button",{type:"button",className:"close-btn",onClick:()=>l(!1),children:"×"})]})]})]}),n.jsx("div",{className:"guest-card-actions",children:o?n.jsx(n.Fragment,{children:n.jsx(E.button,{type:"button",className:"form-btn add-guest-btn",disabled:!S,onClick:()=>{i&&i(),m(!1),p(!1),l(!1)},whileHover:S?{scale:1.02}:{},title:y("rsvp:addGuest"),children:n.jsx(A.Add,{})})}):n.jsxs(n.Fragment,{children:[!x&&n.jsx("button",{type:"button",className:"three-dots-btn",onClick:()=>p(!0),title:y("rsvp:addDietary"),children:n.jsx(A.Food,{})}),!d&&n.jsx("button",{type:"button",className:"three-dots-btn",onClick:()=>l(!0),title:y("rsvp:addNote"),children:n.jsx(A.Note,{})}),n.jsx("button",{type:"button",className:"remove-guest",onClick:()=>{window.confirm(`Are you sure you want to remove ${t.firstName} ${t.lastName} from the guest roster?`)&&r?.(e)},children:n.jsx(A.Close,{})})]})})]})},ie={firstName:"",lastName:"",dietary:"",note:""},He=({guests:e,onGuestsChange:t})=>{const{t:s}=I(["rsvp"]),[r,i]=f.useState(ie),o=f.useCallback(()=>{!r.firstName.trim()||!r.lastName.trim()||(t([...e,r]),i(ie))},[r,e,t]),v=f.useCallback(p=>{t(e.filter((d,l)=>l!==p))},[e,t]),y=f.useCallback((p,d,l)=>{t(e.map((c,m)=>m===p?{...c,[d]:l}:c))},[e,t]),x=f.useCallback((p,d)=>{i(l=>({...l,[p]:d}))},[]);return n.jsxs("div",{className:"guests-section",children:[n.jsxs("h3",{children:[s("rsvp:guestsTitle"),e.length>0&&` (${e.length})`]}),n.jsxs(te,{children:[e.map((p,d)=>n.jsx(ne,{index:d,guest:p,onUpdate:y,onRemove:v,isRostered:!0},`roster-${d}`)),n.jsx(ne,{index:e.length,guest:r,onUpdate:(p,d,l)=>x(d,l),onConfirm:o,isDraft:!0},"draft")]})]})};var G={exports:{}},W,se;function Me(){if(se)return W;se=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W=e,W}var K,ae;function Ue(){if(ae)return K;ae=1;var e=Me();function t(){}function s(){}return s.resetWarningCache=t,K=function(){function r(v,y,x,p,d,l){if(l!==e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:s,resetWarningCache:t};return o.PropTypes=o,o},K}var oe;function Ve(){return oe||(oe=1,G.exports=Ue()()),G.exports}var Be=Ve();const L=pe(Be);var Ge=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},J.apply(this,arguments)}function We(e,t){if(e==null)return{};var s={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(s[i]=e[i]);return s}function H(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q(e,t)}var V=(function(e){Ke(t,e);function t(){var r;return r=e.call(this)||this,r.handleExpired=r.handleExpired.bind(H(r)),r.handleErrored=r.handleErrored.bind(H(r)),r.handleChange=r.handleChange.bind(H(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(H(r)),r}var s=t.prototype;return s.getCaptchaFunction=function(i){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[i]:this.props.grecaptcha[i]:null},s.getValue=function(){var i=this.getCaptchaFunction("getResponse");return i&&this._widgetId!==void 0?i(this._widgetId):null},s.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},s.execute=function(){var i=this.getCaptchaFunction("execute");if(i&&this._widgetId!==void 0)return i(this._widgetId);this._executeRequested=!0},s.executeAsync=function(){var i=this;return new Promise(function(o,v){i.executionResolve=o,i.executionReject=v,i.execute()})},s.reset=function(){var i=this.getCaptchaFunction("reset");i&&this._widgetId!==void 0&&i(this._widgetId)},s.forceReset=function(){var i=this.getCaptchaFunction("reset");i&&i()},s.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},s.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},s.handleChange=function(i){this.props.onChange&&this.props.onChange(i),this.executionResolve&&(this.executionResolve(i),delete this.executionReject,delete this.executionResolve)},s.explicitRender=function(){var i=this.getCaptchaFunction("render");if(i&&this._widgetId===void 0){var o=document.createElement("div");this._widgetId=i(o,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(o)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},s.componentDidMount=function(){this.explicitRender()},s.componentDidUpdate=function(){this.explicitRender()},s.handleRecaptchaRef=function(i){this.captcha=i},s.render=function(){var i=this.props;i.sitekey,i.onChange,i.theme,i.type,i.tabindex,i.onExpired,i.onErrored,i.size,i.stoken,i.grecaptcha,i.badge,i.hl,i.isolated;var o=We(i,Ge);return f.createElement("div",J({},o,{ref:this.handleRecaptchaRef}))},t})(f.Component);V.displayName="ReCAPTCHA";V.propTypes={sitekey:L.string.isRequired,onChange:L.func,grecaptcha:L.object,theme:L.oneOf(["dark","light"]),type:L.oneOf(["image","audio"]),tabindex:L.number,onExpired:L.func,onErrored:L.func,size:L.oneOf(["compact","normal","invisible"]),stoken:L.string,hl:L.string,badge:L.oneOf(["bottomright","bottomleft","inline"]),isolated:L.bool};V.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var z={exports:{}},h={};var ce;function ze(){if(ce)return h;ce=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,s=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,v=e?Symbol.for("react.provider"):60109,y=e?Symbol.for("react.context"):60110,x=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,l=e?Symbol.for("react.suspense"):60113,c=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,u=e?Symbol.for("react.lazy"):60116,S=e?Symbol.for("react.block"):60121,R=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function b(a){if(typeof a=="object"&&a!==null){var P=a.$$typeof;switch(P){case t:switch(a=a.type,a){case x:case p:case r:case o:case i:case l:return a;default:switch(a=a&&a.$$typeof,a){case y:case d:case u:case m:case v:return a;default:return P}}case s:return P}}}function N(a){return b(a)===p}return h.AsyncMode=x,h.ConcurrentMode=p,h.ContextConsumer=y,h.ContextProvider=v,h.Element=t,h.ForwardRef=d,h.Fragment=r,h.Lazy=u,h.Memo=m,h.Portal=s,h.Profiler=o,h.StrictMode=i,h.Suspense=l,h.isAsyncMode=function(a){return N(a)||b(a)===x},h.isConcurrentMode=N,h.isContextConsumer=function(a){return b(a)===y},h.isContextProvider=function(a){return b(a)===v},h.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===t},h.isForwardRef=function(a){return b(a)===d},h.isFragment=function(a){return b(a)===r},h.isLazy=function(a){return b(a)===u},h.isMemo=function(a){return b(a)===m},h.isPortal=function(a){return b(a)===s},h.isProfiler=function(a){return b(a)===o},h.isStrictMode=function(a){return b(a)===i},h.isSuspense=function(a){return b(a)===l},h.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===r||a===p||a===o||a===i||a===l||a===c||typeof a=="object"&&a!==null&&(a.$$typeof===u||a.$$typeof===m||a.$$typeof===v||a.$$typeof===y||a.$$typeof===d||a.$$typeof===R||a.$$typeof===g||a.$$typeof===w||a.$$typeof===S)},h.typeOf=b,h}var le;function Ye(){return le||(le=1,z.exports=ze()),z.exports}var Y,de;function Je(){if(de)return Y;de=1;var e=Ye(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=r,o[e.Memo]=i;function v(u){return e.isMemo(u)?i:o[u.$$typeof]||t}var y=Object.defineProperty,x=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,c=Object.prototype;function m(u,S,R){if(typeof S!="string"){if(c){var g=l(S);g&&g!==c&&m(u,g,R)}var w=x(S);p&&(w=w.concat(p(S)));for(var b=v(u),N=v(S),a=0;a<w.length;++a){var P=w[a];if(!s[P]&&!(R&&R[P])&&!(N&&N[P])&&!(b&&b[P])){var _=d(S,P);try{y(u,P,_)}catch{}}}}return u}return Y=m,Y}var Qe=Je();const Xe=pe(Qe);function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},X.apply(this,arguments)}function Ze(e,t){if(e==null)return{};var s={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(s[i]=e[i]);return s}function et(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var k={},tt=0;function rt(e,t){return t=t||{},function(r){var i=r.displayName||r.name||"Component",o=(function(y){et(x,y);function x(d,l){var c;return c=y.call(this,d,l)||this,c.state={},c.__scriptURL="",c}var p=x.prototype;return p.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+tt++),this.__scriptLoaderID},p.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},p.asyncScriptLoaderHandleLoad=function(l){var c=this;this.setState(l,function(){return c.props.asyncScriptOnLoad&&c.props.asyncScriptOnLoad(c.state)})},p.asyncScriptLoaderTriggerOnScriptLoaded=function(){var l=k[this.__scriptURL];if(!l||!l.loaded)throw new Error("Script is not loaded.");for(var c in l.observers)l.observers[c](l);delete window[t.callbackName]},p.componentDidMount=function(){var l=this,c=this.setupScriptURL(),m=this.asyncScriptLoaderGetScriptLoaderID(),u=t,S=u.globalName,R=u.callbackName,g=u.scriptId;if(S&&typeof window[S]<"u"&&(k[c]={loaded:!0,observers:{}}),k[c]){var w=k[c];if(w&&(w.loaded||w.errored)){this.asyncScriptLoaderHandleLoad(w);return}w.observers[m]=function(_){return l.asyncScriptLoaderHandleLoad(_)};return}var b={};b[m]=function(_){return l.asyncScriptLoaderHandleLoad(_)},k[c]={loaded:!1,observers:b};var N=document.createElement("script");N.src=c,N.async=!0;for(var a in t.attributes)N.setAttribute(a,t.attributes[a]);g&&(N.id=g);var P=function(C){if(k[c]){var F=k[c],$=F.observers;for(var q in $)C($[q])&&delete $[q]}};R&&typeof window<"u"&&(window[R]=function(){return l.asyncScriptLoaderTriggerOnScriptLoaded()}),N.onload=function(){var _=k[c];_&&(_.loaded=!0,P(function(C){return R?!1:(C(_),!0)}))},N.onerror=function(){var _=k[c];_&&(_.errored=!0,P(function(C){return C(_),!0}))},document.body.appendChild(N)},p.componentWillUnmount=function(){var l=this.__scriptURL;if(t.removeOnUnmount===!0)for(var c=document.getElementsByTagName("script"),m=0;m<c.length;m+=1)c[m].src.indexOf(l)>-1&&c[m].parentNode&&c[m].parentNode.removeChild(c[m]);var u=k[l];u&&(delete u.observers[this.asyncScriptLoaderGetScriptLoaderID()],t.removeOnUnmount===!0&&delete k[l])},p.render=function(){var l=t.globalName,c=this.props;c.asyncScriptOnLoad;var m=c.forwardedRef,u=Ze(c,["asyncScriptOnLoad","forwardedRef"]);return l&&typeof window<"u"&&(u[l]=typeof window[l]<"u"?window[l]:void 0),u.ref=m,f.createElement(r,u)},x})(f.Component),v=f.forwardRef(function(y,x){return f.createElement(o,X({},y,{forwardedRef:x}))});return v.displayName="AsyncScriptLoader("+i+")",v.propTypes={asyncScriptOnLoad:L.func},Xe(v,r)}}var Z="onloadcallback",nt="grecaptcha";function ee(){return typeof window<"u"&&window.recaptchaOptions||{}}function it(){var e=ee(),t=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+t+"/recaptcha/enterprise.js?onload="+Z+"&render=explicit":"https://"+t+"/recaptcha/api.js?onload="+Z+"&render=explicit"}const st=rt(it,{callbackName:Z,globalName:nt,attributes:ee().nonce?{nonce:ee().nonce}:{}})(V),M={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},at=({currentStep:e,form:t,isClient:s,onChange:r,onGuestsChange:i,captchaToken:o,error:v,recaptchaRef:y,setCaptchaToken:x,recaptchaSiteKey:p})=>{const{t:d}=I(["home","common","rsvp"]),l=c=>c.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)?null:d("rsvp:errors.invalidEmail"):d("rsvp:errors.required");return n.jsxs(te,{mode:"wait",children:[e===0&&n.jsxs(E.div,{variants:M,initial:"initial",animate:"animate",exit:"exit",className:"form-content",children:[n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{htmlFor:"email",children:[d("rsvp:email")," ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{id:"email",name:"email",type:"email",value:t.email,spellCheck:!1,onKeyDown:c=>c.key===" "&&c.preventDefault(),onPaste:c=>/\s/.test(c.clipboardData.getData("text"))&&c.preventDefault(),onChange:r,className:`form-input ${t.email.trim()?l(t.email)?"form-input-invalid":"form-input-valid":""}`,required:!0,autoComplete:"email"}),t.email&&l(t.email)&&n.jsx("div",{className:"field-error",children:l(t.email)})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{htmlFor:"attending",children:[d("rsvp:attending")," ",n.jsx("span",{className:"required",children:"*"})]}),n.jsxs("select",{id:"attending",name:"attending",value:t.attending,onChange:r,className:`form-input ${t.attending?"form-input-valid":""}`,required:!0,autoComplete:"off",children:[n.jsx("option",{value:"",children:d("rsvp:select")}),n.jsx("option",{value:"yes",children:d("rsvp:yes")}),n.jsx("option",{value:"no",children:d("rsvp:no")})]})]})]},"step0"),e===1&&n.jsx(E.div,{variants:M,initial:"initial",animate:"animate",exit:"exit",className:"form-content",children:t.attending==="yes"?n.jsx(He,{guests:t.guests,onGuestsChange:i,required:!0}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{htmlFor:"nonAttendingName",children:[d("rsvp:yourName")," ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{id:"nonAttendingName",name:"nonAttendingName",type:"text",value:t.nonAttendingName,onChange:r,className:"form-input",required:!0,autoComplete:"name",spellCheck:!1})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{htmlFor:"notes",children:[d("rsvp:messageToBrideGroom")," ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("textarea",{id:"notes",name:"notes",value:t.notes,onChange:r,className:"form-input",placeholder:d("rsvp:messagePlaceholder"),rows:5,required:!0})]})]})},"guestsOrName"),e===2&&s&&n.jsxs(E.div,{variants:M,initial:"initial",animate:"animate",exit:"exit",className:"form-content",children:[t.attending==="yes"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"notes",children:d("rsvp:messageToBrideGroom")}),n.jsx("textarea",{id:"notes",name:"notes",value:t.notes,onChange:r,className:"form-input",placeholder:d("rsvp:messagePlaceholder"),rows:5})]}),n.jsx(st,{sitekey:p,onChange:c=>x(c),ref:y,style:{display:"inline-block",width:"100%",marginTop:"1rem"}}),!o&&v&&n.jsx("div",{className:"field-error",children:"Please complete reCAPTCHA"})]},"step3"),e===3&&n.jsx(E.div,{variants:M,initial:"initial",animate:"animate",exit:"exit",className:"form-content",children:n.jsxs("div",{className:"review",children:[n.jsxs("p",{children:[n.jsxs("strong",{children:[d("rsvp:email"),":"]})," ",t.email]}),n.jsxs("p",{children:[n.jsxs("strong",{children:[d("rsvp:attending"),":"]})," ",d(`rsvp:${t.attending}`)]}),t.attending==="yes"&&t.guests.length>0&&n.jsxs("div",{children:[n.jsxs("strong",{children:[d("rsvp:guestsTitle"),":"]}),n.jsx("ul",{children:t.guests.map((c,m)=>n.jsxs("li",{children:[c.firstName," ",c.lastName,c.dietary&&` - ${d("rsvp:dietary")}: ${c.dietary}`,c.note&&` - ${d("rsvp:guestNote")}: ${c.note}`]},m))})]}),t.attending==="no"&&n.jsxs("p",{children:[n.jsxs("strong",{children:[d("rsvp:name"),":"]})," ",t.nonAttendingName]}),t.notes&&n.jsxs("p",{children:[n.jsxs("strong",{children:[d("rsvp:messageToBrideGroom"),":"]})," ",t.notes]})]})},"step4")]})},ot=({submittedRef:e})=>{const{t}=I(["home","common","rsvp"]),[s,r]=f.useState(!1);return f.useEffect(()=>{const i=setTimeout(()=>r(!0),50),o=setInterval(()=>{r(!1),setTimeout(()=>r(!0),55)},1e4);return()=>{clearTimeout(i),clearInterval(o)}},[]),n.jsxs(E.div,{className:"rsvp-page container",ref:e,initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:25,duration:.6}},children:[n.jsx(E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:20,delay:1},className:"heart-animated",style:{fontSize:"4rem",marginBottom:"1.5rem",display:"flex",justifyContent:"center"},children:n.jsxs("svg",{viewBox:"0 0 24 24",children:[n.jsx("defs",{children:n.jsx("path",{id:"heart",d:"M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z"})}),n.jsx(E.use,{xlinkHref:"#heart",initial:{opacity:0,scale:.33},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:15},style:{transformOrigin:"center"}},s?"on":"off")]})}),n.jsx(E.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},style:{textAlign:"center",marginBottom:"1rem"},children:t("rsvp:thankYou")}),n.jsx(E.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},style:{textAlign:"center",maxWidth:"500px",margin:"0 auto 2rem",lineHeight:1.6},children:t("rsvp:confirmation")})]})},ct="6Lcy_mcsAAAAADoT-ibwy1RvePEHG4xJ87D0fdse",U=["contactAndAttendance","guestsOrName","captcha","review"],lt={0:"contactAndAttendance",1:"guestsOrName",2:"captcha",3:"review"},yt=_e(function(){const{t,ready:s}=I(["home","common","rsvp"]),[r,i]=f.useState(!1),[o,v]=f.useState({email:"",attending:"",guests:[],nonAttendingName:"",notes:"",website:""}),[y,x]=f.useState(!1),[p,d]=f.useState(0),[l,c]=f.useState(!1),[m,u]=f.useState(null),[S,R]=f.useState(!1),[g,w]=f.useState(null),[b]=f.useState(Date.now()),N=f.useRef(null),a=f.useRef(null),P=f.useRef(null);if(f.useEffect(()=>i(!0),[]),f.useEffect(()=>{m&&N.current&&N.current.focus(),l&&a.current&&a.current.focus()},[m,l]),!s)return n.jsx("div",{className:"loading",children:t("common:loading")});const _=o.guests.some(j=>j.firstName.trim()&&j.lastName.trim()),C=j=>j.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j)?null:t("rsvp:errors.invalidEmail"):t("rsvp:errors.required"),F=()=>{switch(p){case 0:return!C(o.email)&&!!o.attending;case 1:return o.attending==="yes"?_:!!o.nonAttendingName?.trim()&&!!o.notes?.trim();case 2:return!!g;default:return!0}},$=j=>{const{name:O,value:B}=j.target;v(Ne=>({...Ne,[O]:B})),m&&u(null)},q=j=>{v(O=>({...O,guests:j})),x(j.some(O=>O.firstName.trim()&&O.lastName.trim()))},be=()=>{if(!F()){p===1&&o.attending==="yes"&&!_?u(t("rsvp:errors.addAtLeastOneGuest")):u(t("rsvp:errors.required"));return}u(null),d(j=>Math.min(j+1,U.length-1))},je=()=>{u(null),d(j=>Math.max(j-1,0))},we=async()=>{if(u(null),o.website)return u("Bot detected.");if(Date.now()-b<2e3)return u("Submission too fast.");if(!g)return u("Please complete reCAPTCHA.");R(!0);try{const j=o.attending==="yes"?o.guests.map((O,B)=>`${B+1}. ${O.firstName} ${O.lastName}`+(O.dietary?` - Dietary: ${O.dietary}`:"")+(O.note?` - Note: ${O.note}`:"")).join(`
`):`Not attending: ${o.nonAttendingName}`;await qe.send("service_vvuhisc","template_4m25aki",{email:o.email,attending:o.attending,guestsCount:o.attending==="yes"?o.guests.length:1,guests:j,notes:o.notes||"None",recaptchaToken:g},"gVksEDEDoKBjB0TJU"),c(!0)}catch(j){console.error("Submission error:",j),u(t("rsvp:errors.failed"))}finally{R(!1)}},Se=()=>{c(!1),d(0),v({email:"",attending:"",guests:[],nonAttendingName:"",notes:"",website:""}),w(null),x(!1)};if(l)return n.jsx(ot,{onReset:Se,submittedRef:a});const Re=(p+1)/U.length*100;return n.jsxs("div",{className:"rsvp-page container",children:[n.jsx("h1",{children:"Rsvp"}),n.jsx("p",{className:"step-description",children:t(`rsvp:steps.${lt[p]}`)}),n.jsx("div",{className:"progress-bar",children:n.jsx("div",{className:"progress-bar-fill",style:{width:`${Re}%`}})}),n.jsxs("form",{autoComplete:"on",className:"rsvp-form",onSubmit:j=>j.preventDefault(),children:[n.jsx(at,{currentStep:p,form:o,isClient:r,onChange:$,onGuestsChange:q,captchaToken:g,error:m,recaptchaRef:P,setCaptchaToken:w,recaptchaSiteKey:ct}),m&&n.jsx("div",{className:"rsvp-error",ref:N,tabIndex:-1,role:"alert",children:m}),n.jsxs("div",{className:"form-navigation",children:[n.jsx("button",{type:"button",onClick:je,disabled:p===0,title:t("rsvp:back"),children:n.jsx(A.Back,{})}),n.jsxs("span",{children:[p+1,"/",U.length]}),p<U.length-1?n.jsx("button",{type:"button",disabled:!F(),onClick:be,title:t("rsvp:next"),children:n.jsx(A.Next,{})}):n.jsx("button",{type:"button",onClick:we,disabled:S,children:t(S?"rsvp:sending":"rsvp:submit")})]})]})]})});export{yt as default};
