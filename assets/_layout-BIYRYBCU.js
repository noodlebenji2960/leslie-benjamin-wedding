import{q as L,a as i,p as e,x as y,w as R,y as I}from"./chunk-EPOLDU6W-DHF8IUtq.js";import{u as C}from"./useWeddingData-r-7mEpNk.js";import{C as M,u as O,R as B}from"./lenis-react-Be-k6GUT.js";import{u as k}from"./useTranslation-DkpKivYa.js";import{A as w,m as N}from"./proxy-Db7tpQ-9.js";import{u as H}from"./LanguageContext-DvtKiP1W.js";import{u as q}from"./ThemeContext-Ber_lVCd.js";function A({locale:t,links:s,buildLink:a}){const{t:o}=k(["common"]),d=L(),c=i.useRef(null),[m,v]=i.useState({left:0,width:0}),[g,l]=i.useState(!1),u=C(),h=(n=>n.replace(/^\/(en|es)/,"")||"/")(d.pathname),p=h==="/"||h==="",x=n=>{if(!c.current)return;const r=c.current.querySelectorAll(".nav-link")[n];if(!r)return;const $=c.current.getBoundingClientRect(),b=r.getBoundingClientRect();v({left:b.left-$.left,width:b.width})};i.useEffect(()=>{if(g)return;const n=s.findIndex(r=>r.path==="/"?p:h===r.path);n!==-1&&x(n)},[d.pathname,t,g]);const E=n=>{l(!0),x(n)},S=()=>{l(!1)},T=`${u.bride.firstName} & ${u.groom.firstName}`;return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"nav",children:[e.jsx(w,{children:!p&&e.jsx(N.div,{className:"logo-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},children:e.jsx(y,{to:a("/"),className:"logo",children:e.jsx("h1",{children:T})})})}),e.jsx(w,{children:!p&&e.jsx(N.div,{className:"nav-countdown",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},children:e.jsx(M,{size:"sm",date:u.wedding.date,time:u.wedding.ceremony.time})})}),e.jsxs("div",{className:"nav-links desktop",ref:c,children:[s.map((n,r)=>e.jsx(y,{to:a(n.path),className:"nav-link",onMouseEnter:()=>E(r),onMouseLeave:S,children:n.label},n.path)),e.jsx("div",{className:"nav-indicator",style:{transform:`translateX(${m.left}px)`,width:m.width}})]})]})})}function P({currentLocale:t,onSwitch:s,isPending:a}){return e.jsx("button",{className:"language-switcher",onClick:s,disabled:a,"aria-label":`Switch to ${t==="es"?"English":"Spanish"}`,children:e.jsxs("div",{className:"language-icons",children:[e.jsx("span",{className:`language-label ${t==="es"?"active":""}`,children:"ES"}),e.jsx("span",{className:`language-label ${t==="en"?"active":""}`,children:"EN"})]})})}const j=["light","dark"],D={light:"Light mode",dark:"Dark mode"};function _(){const{theme:t,setTheme:s}=q(),a=j.indexOf(t),o=()=>{const d=(a+1)%j.length;s(j[d])};return e.jsx("button",{className:"theme-toggle-slider",onClick:o,"aria-label":`${D[t]}. Click to switch theme.`,children:e.jsxs("div",{className:"toggle-icons",children:[e.jsx("span",{className:`icon sun ${t==="light"?"active":""}`,children:"☀︎"}),e.jsx("span",{className:`icon moon ${t==="dark"?"active":""}`,children:"⏾"})]})})}function z({onClick:t}){const[s,a]=i.useState(!1);return i.useEffect(()=>{const o=()=>{a(window.scrollY>5)};return o(),window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),e.jsx("button",{className:`back-to-top ${s?"visible":""}`,onClick:t,"aria-label":"Back to top",children:"↑"})}const K=R(function(){const s=L(),a=I(),[o,d]=i.useTransition(),{locale:c,switchLanguage:m}=H(),[v,g]=i.useState(!1),{t:l}=k(["common"]),u=i.useRef(null),f=O(()=>{});i.useEffect(()=>{f?.scrollTo(0,{immediate:!0})},[s.pathname,f]);const h=[{path:"/",label:l("nav.home")},{path:"/rsvp",label:l("nav.rsvp")},{path:"/schedule",label:l("nav.schedule")},{path:"/qa",label:l("nav.qa")}],p=x=>`/${c}${x==="/"?"":x}`;return e.jsx(B,{root:!0,children:e.jsxs("div",{className:"container",children:[e.jsx(A,{menuOpen:v,setMenuOpen:g,locale:c,links:h,buildLink:p,onLanguageSwitch:()=>d(m),isPending:o,hamburgerRef:u}),e.jsxs("main",{className:"main",children:[e.jsx(w,{mode:"wait",children:e.jsx(N.div,{className:"page-content",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},children:a},s.pathname)}),e.jsxs("div",{className:"fixed-container",children:[e.jsx(P,{currentLocale:c,onSwitch:m,isPending:o}),e.jsxs("div",{className:"group",children:[e.jsx(z,{onClick:()=>f?.scrollTo(0,{duration:1})}),e.jsx(_,{})]})]})]})]})})});export{K as default};
