import{j as p}from"./jsx-runtime-u17CrQMm.js";import{a as n}from"./chunk-LFPYN7LY-BSAdruXa.js";const d={category:"RSVP",allowDuplicates:!0},_={category:"RSVP",allowDuplicates:!0},g={category:"RSVP",allowDuplicates:!0},w={category:"RSVP",allowDuplicates:!0,nonInteraction:!0},v={category:"RSVP",dedupeKey:"rsvp_submit_success"},f={category:"RSVP",allowDuplicates:!0,nonInteraction:!0},D={category:"RSVP",dedupeKey:"rsvp_confirmation_view"},S={category:"Registry",allowDuplicates:!0},m={category:"FAQ",allowDuplicates:!0},A={category:"FAQ",allowDuplicates:!0},K={category:"Session",dedupeKey:"session_start"},x={category:"Session",dedupeKey:"session_end"},E={category:"Session",allowDuplicates:!0},P={category:"Session",allowDuplicates:!0},R={category:"Device",dedupeKey:"device_type"},V={category:"User",dedupeKey:"return_visitor"},b={category:"User",dedupeKey:"first_time_visitor"},k={category:"Conversion",dedupeKey:"dynamic"},C={category:"System",allowDuplicates:!0},I={category:"System",allowDuplicates:!0},T={rsvp_start:d,rsvp_step_complete:_,rsvp_step_back:g,rsvp_abandonment:w,rsvp_submit_success:v,rsvp_submit_error:f,rsvp_confirmation_view:D,registry_link_click:S,faq_item_expand:m,faq_item_collapse:A,session_start:K,session_end:x,time_on_site:E,page_exit:P,device_type:R,return_visitor:V,first_time_visitor:b,conversion:k,page_view:C,exception:I},U=T,a={conversion:e=>`conversion_${e?.event_label||"unknown"}`},l=n.createContext(null),h=(...e)=>{typeof window<"u"&&window.gtag?window.gtag(...e):console.warn("[Analytics] gtag not loaded yet")},$=({children:e,cookiePreference:u})=>{const r=n.useRef(new Set),y=(s,c)=>{if(!u?.analytics){console.log(`[Analytics] Skipping "${s}" â€” user did not consent`);return}const t=U[s];if(!t)return console.error(`[Analytics] Unknown event: ${s}`);let o;t.dedupeKey==="dynamic"&&a[s]?o=a[s](c):t.dedupeKey&&(o=t.dedupeKey);const i=t.allowDuplicates??!o;!i&&o&&r.current.has(o)||(h("event",s,{event_category:t.category,...t.nonInteraction&&{non_interaction:!0},...c}),!i&&o&&r.current.add(o))};return p.jsx(l.Provider,{value:{event:y},children:e})},q=()=>{const e=n.useContext(l);if(!e)throw new Error("useAnalytics must be used within an AnalyticsProvider");return e};export{$ as A,q as u};
