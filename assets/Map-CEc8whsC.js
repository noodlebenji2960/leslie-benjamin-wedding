const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BwvxTK3n.js","./chunk-EPOLDU6W-BnKKP6Ue.js","./leaflet-src-DGzoi6ic.js","./index-CUX0mMyJ.js","./leaflet-CIGW-MKW.css","./leaflet-routing-machine-Q9NVyIMv.js","./leaflet-routing-machine-1NKW7b23.css"])))=>i.map(i=>d[i]);
import{j as m}from"./jsx-runtime-u17CrQMm.js";import{a as c}from"./chunk-EPOLDU6W-BnKKP6Ue.js";const j="modulepreload",S=function(h,l){return new URL(h,l).href},P={},v=function(l,s,y){let R=Promise.resolve();if(s&&s.length>0){let b=function(e){return Promise.all(e.map(u=>Promise.resolve(u).then(r=>({status:"fulfilled",value:r}),r=>({status:"rejected",reason:r}))))};const o=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),_=n?.nonce||n?.getAttribute("nonce");R=b(s.map(e=>{if(e=S(e,y),e in P)return;P[e]=!0;const u=e.endsWith(".css"),r=u?'[rel="stylesheet"]':"";if(y)for(let f=o.length-1;f>=0;f--){const p=o[f];if(p.href===e&&(!u||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");if(i.rel=u?"stylesheet":j,u||(i.as="script"),i.crossOrigin="",i.href=e,_&&i.setAttribute("nonce",_),document.head.appendChild(i),u)return new Promise((f,p)=>{i.addEventListener("load",f),i.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${e}`)))})}))}function L(o){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o}return R.then(o=>{for(const n of o||[])n.status==="rejected"&&L(n.reason);return l().catch(L)})},T=({label:h,coordinates:l,extraCoordinates:s,mapUrl:y,width:R="100%",height:L="300px",showRoute:o=!1,interactive:n=!1,zoom:_,style:b})=>{const[e,u]=c.useState(null),[r,i]=c.useState(null),[f,p]=c.useState(!1),E=c.useRef(null),d=c.useRef(null);if(c.useEffect(()=>{(async()=>{const[t,a]=await Promise.all([v(()=>import("./index-BwvxTK3n.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),v(()=>import("./leaflet-src-DGzoi6ic.js").then(g=>g.l),__vite__mapDeps([2,1]),import.meta.url),v(()=>Promise.resolve({}),__vite__mapDeps([4]),import.meta.url)]);u(t),i(a.default)})()},[]),c.useEffect(()=>{!r||!o||(async()=>{await Promise.all([v(()=>import("./leaflet-routing-machine-Q9NVyIMv.js").then(g=>g.l),__vite__mapDeps([5,1]),import.meta.url),v(()=>Promise.resolve({}),__vite__mapDeps([6]),import.meta.url)]);let t=0;const a=setInterval(()=>{(r.Routing||window.L?.Routing)&&(r.Routing||(r.Routing=window.L.Routing),p(!0),clearInterval(a)),t++,t>20&&clearInterval(a)},100)})()},[r,o]),c.useEffect(()=>{const t=setInterval(()=>{const a=document.querySelector(".leaflet-control-attribution.leaflet-control");a&&(a.remove(),clearInterval(t))},100);return()=>clearInterval(t)},[]),c.useEffect(()=>{if(!(!f||!r||!E.current||!o||!s?.length)){d.current&&(d.current.remove(),d.current=null);try{const t=E.current,a=[r.latLng(l.lat,l.lng),r.latLng(s[0].lat,s[0].lng)];d.current=r.Routing.control({waypoints:a,routeWhileDragging:!1,show:!1,addWaypoints:!1,draggableWaypoints:!1,createMarker:()=>null,lineOptions:{styles:[{color:"var(--color-primary)",weight:4}],extendToWaypoints:!0,missingRouteTolerance:0}}).addTo(t),setTimeout(()=>{const g=document.querySelector(".leaflet-routing-container");g&&(g.style.display="none")},100)}catch(t){console.error("Failed to add routing:",t)}return()=>{d.current&&(d.current.remove(),d.current=null)}}},[f,r,o,l,s]),!e||!r)return null;const w=s?[l,...s]:[l],k=_!==void 0?{center:[l.lat,l.lng],zoom:_}:{bounds:w.map(t=>[t.lat,t.lng]),boundsOptions:{padding:[50,50]}};return m.jsxs(e.MapContainer,{ref:E,...k,style:{...b,width:R,height:L,borderRadius:"8px"},scrollWheelZoom:!1,dragging:n,touchZoom:n,doubleClickZoom:n,boxZoom:n,keyboard:n,zoomControl:n,whenReady:()=>{E.current&&E.current.invalidateSize()},children:[m.jsx(e.TileLayer,{url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",attribution:""}),m.jsx(e.Marker,{position:[l.lat,l.lng],children:m.jsx(e.Popup,{children:y&&m.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",children:h&&m.jsx("div",{className:"map-label",children:h})})})}),s?.map((t,a)=>t.showMarker!==!1?m.jsx(e.Marker,{position:[t.lat,t.lng],children:m.jsx(e.Popup,{children:t.label||"Additional location"})},a):null)]})};export{T as M};
