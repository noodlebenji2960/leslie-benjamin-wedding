import{y as pe,a as f,w as we}from"./chunk-EPOLDU6W-BnKKP6Ue.js";import{j as r}from"./jsx-runtime-u17CrQMm.js";import{u as Se}from"./LanguageContext-Ds-fbCcn.js";import{I as $}from"./Icon-DFl7Gw49.js";import{u as te}from"./useTranslation-B9zSoiKr.js";import{m as k,A as M}from"./proxy-DBX3VoSC.js";class I{constructor(t=0,a="Network Error"){this.status=t,this.text=a}}const Re=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},_={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Re()},re=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},Ne=(e,t="https://api.emailjs.com")=>{if(!e)return;const a=re(e);_.publicKey=a.publicKey,_.blockHeadless=a.blockHeadless,_.storageProvider=a.storageProvider,_.blockList=a.blockList,_.limitRate=a.limitRate,_.origin=a.origin||t},ue=async(e,t,a={})=>{const n=await fetch(_.origin+e,{method:"POST",headers:a,body:t}),i=await n.text(),s=new I(n.status,i);if(n.ok)return s;throw s},he=(e,t,a)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a||typeof a!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},_e=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},me=e=>e.webdriver||!e.languages||e.languages.length===0,fe=()=>new I(451,"Unavailable For Headless Browser"),Te=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},Pe=e=>!e.list?.length||!e.watchVariable,Oe=(e,t)=>e instanceof FormData?e.get(t):e[t],ve=(e,t)=>{if(Pe(e))return!1;Te(e.list,e.watchVariable);const a=Oe(t,e.watchVariable);return typeof a!="string"?!1:e.list.includes(a)},ye=()=>new I(403,"Forbidden"),Le=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},Ce=async(e,t,a)=>{const n=Number(await a.get(e)||0);return t-Date.now()+n},ge=async(e,t,a)=>{if(!t.throttle||!a)return!1;Le(t.throttle,t.id);const n=t.id||e;return await Ce(n,t.throttle,a)>0?!0:(await a.set(n,Date.now().toString()),!1)},be=()=>new I(429,"Too Many Requests"),Ee=async(e,t,a,n)=>{const i=re(n),s=i.publicKey||_.publicKey,b=i.blockHeadless||_.blockHeadless,d=i.storageProvider||_.storageProvider,x={..._.blockList,...i.blockList},p={..._.limitRate,...i.limitRate};return b&&me(navigator)?Promise.reject(fe()):(he(s,e,t),_e(a),a&&ve(x,a)?Promise.reject(ye()):await ge(location.pathname,p,d)?Promise.reject(be()):ue("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:e,template_id:t,template_params:a}),{"Content-type":"application/json"}))},ke=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Ae=e=>typeof e=="string"?document.querySelector(e):e,$e=async(e,t,a,n)=>{const i=re(n),s=i.publicKey||_.publicKey,b=i.blockHeadless||_.blockHeadless,d=_.storageProvider||i.storageProvider,x={..._.blockList,...i.blockList},p={..._.limitRate,...i.limitRate};if(b&&me(navigator))return Promise.reject(fe());const u=Ae(a);he(s,e,t),ke(u);const c=new FormData(u);return ve(x,c)?Promise.reject(ye()):await ge(location.pathname,p,d)?Promise.reject(be()):(c.append("lib_version","4.4.1"),c.append("service_id",e),c.append("template_id",t),c.append("user_id",s),ue("/api/v1.0/email/send-form",c))},Ie={init:Ne,send:Ee,sendForm:$e,EmailJSResponseStatus:I};var W={exports:{}},G,ne;function Fe(){if(ne)return G;ne=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return G=e,G}var K,ie;function De(){if(ie)return K;ie=1;var e=Fe();function t(){}function a(){}return a.resetWarningCache=t,K=function(){function n(b,d,x,p,u,c){if(c!==e){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:t};return s.PropTypes=s,s},K}var se;function qe(){return se||(se=1,W.exports=De()()),W.exports}var He=qe();const O=pe(He);var Me=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Y.apply(this,arguments)}function Ue(e,t){if(e==null)return{};var a={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(a[i]=e[i]);return a}function D(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Q(e,t)}var U=(function(e){Ve(t,e);function t(){var n;return n=e.call(this)||this,n.handleExpired=n.handleExpired.bind(D(n)),n.handleErrored=n.handleErrored.bind(D(n)),n.handleChange=n.handleChange.bind(D(n)),n.handleRecaptchaRef=n.handleRecaptchaRef.bind(D(n)),n}var a=t.prototype;return a.getCaptchaFunction=function(i){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[i]:this.props.grecaptcha[i]:null},a.getValue=function(){var i=this.getCaptchaFunction("getResponse");return i&&this._widgetId!==void 0?i(this._widgetId):null},a.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},a.execute=function(){var i=this.getCaptchaFunction("execute");if(i&&this._widgetId!==void 0)return i(this._widgetId);this._executeRequested=!0},a.executeAsync=function(){var i=this;return new Promise(function(s,b){i.executionResolve=s,i.executionReject=b,i.execute()})},a.reset=function(){var i=this.getCaptchaFunction("reset");i&&this._widgetId!==void 0&&i(this._widgetId)},a.forceReset=function(){var i=this.getCaptchaFunction("reset");i&&i()},a.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},a.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},a.handleChange=function(i){this.props.onChange&&this.props.onChange(i),this.executionResolve&&(this.executionResolve(i),delete this.executionReject,delete this.executionResolve)},a.explicitRender=function(){var i=this.getCaptchaFunction("render");if(i&&this._widgetId===void 0){var s=document.createElement("div");this._widgetId=i(s,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(s)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},a.componentDidMount=function(){this.explicitRender()},a.componentDidUpdate=function(){this.explicitRender()},a.handleRecaptchaRef=function(i){this.captcha=i},a.render=function(){var i=this.props;i.sitekey,i.onChange,i.theme,i.type,i.tabindex,i.onExpired,i.onErrored,i.size,i.stoken,i.grecaptcha,i.badge,i.hl,i.isolated;var s=Ue(i,Me);return f.createElement("div",Y({},s,{ref:this.handleRecaptchaRef}))},t})(f.Component);U.displayName="ReCAPTCHA";U.propTypes={sitekey:O.string.isRequired,onChange:O.func,grecaptcha:O.object,theme:O.oneOf(["dark","light"]),type:O.oneOf(["image","audio"]),tabindex:O.number,onExpired:O.func,onErrored:O.func,size:O.oneOf(["compact","normal","invisible"]),stoken:O.string,hl:O.string,badge:O.oneOf(["bottomright","bottomleft","inline"]),isolated:O.bool};U.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var z={exports:{}},m={};var ae;function Be(){if(ae)return m;ae=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,b=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,x=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,c=e?Symbol.for("react.suspense"):60113,l=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,R=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function j(o){if(typeof o=="object"&&o!==null){var P=o.$$typeof;switch(P){case t:switch(o=o.type,o){case x:case p:case n:case s:case i:case c:return o;default:switch(o=o&&o.$$typeof,o){case d:case u:case v:case h:case b:return o;default:return P}}case a:return P}}}function T(o){return j(o)===p}return m.AsyncMode=x,m.ConcurrentMode=p,m.ContextConsumer=d,m.ContextProvider=b,m.Element=t,m.ForwardRef=u,m.Fragment=n,m.Lazy=v,m.Memo=h,m.Portal=a,m.Profiler=s,m.StrictMode=i,m.Suspense=c,m.isAsyncMode=function(o){return T(o)||j(o)===x},m.isConcurrentMode=T,m.isContextConsumer=function(o){return j(o)===d},m.isContextProvider=function(o){return j(o)===b},m.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===t},m.isForwardRef=function(o){return j(o)===u},m.isFragment=function(o){return j(o)===n},m.isLazy=function(o){return j(o)===v},m.isMemo=function(o){return j(o)===h},m.isPortal=function(o){return j(o)===a},m.isProfiler=function(o){return j(o)===s},m.isStrictMode=function(o){return j(o)===i},m.isSuspense=function(o){return j(o)===c},m.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===n||o===p||o===s||o===i||o===c||o===l||typeof o=="object"&&o!==null&&(o.$$typeof===v||o.$$typeof===h||o.$$typeof===b||o.$$typeof===d||o.$$typeof===u||o.$$typeof===R||o.$$typeof===g||o.$$typeof===S||o.$$typeof===w)},m.typeOf=j,m}var oe;function We(){return oe||(oe=1,z.exports=Be()),z.exports}var J,ce;function Ge(){if(ce)return J;ce=1;var e=We(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=n,s[e.Memo]=i;function b(v){return e.isMemo(v)?i:s[v.$$typeof]||t}var d=Object.defineProperty,x=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,l=Object.prototype;function h(v,w,R){if(typeof w!="string"){if(l){var g=c(w);g&&g!==l&&h(v,g,R)}var S=x(w);p&&(S=S.concat(p(w)));for(var j=b(v),T=b(w),o=0;o<S.length;++o){var P=S[o];if(!a[P]&&!(R&&R[P])&&!(T&&T[P])&&!(j&&j[P])){var N=u(w,P);try{d(v,P,N)}catch{}}}}return v}return J=h,J}var Ke=Ge();const ze=pe(Ke);function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},X.apply(this,arguments)}function Je(e,t){if(e==null)return{};var a={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(a[i]=e[i]);return a}function Ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var E={},Qe=0;function Xe(e,t){return t=t||{},function(n){var i=n.displayName||n.name||"Component",s=(function(d){Ye(x,d);function x(u,c){var l;return l=d.call(this,u,c)||this,l.state={},l.__scriptURL="",l}var p=x.prototype;return p.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+Qe++),this.__scriptLoaderID},p.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},p.asyncScriptLoaderHandleLoad=function(c){var l=this;this.setState(c,function(){return l.props.asyncScriptOnLoad&&l.props.asyncScriptOnLoad(l.state)})},p.asyncScriptLoaderTriggerOnScriptLoaded=function(){var c=E[this.__scriptURL];if(!c||!c.loaded)throw new Error("Script is not loaded.");for(var l in c.observers)c.observers[l](c);delete window[t.callbackName]},p.componentDidMount=function(){var c=this,l=this.setupScriptURL(),h=this.asyncScriptLoaderGetScriptLoaderID(),v=t,w=v.globalName,R=v.callbackName,g=v.scriptId;if(w&&typeof window[w]<"u"&&(E[l]={loaded:!0,observers:{}}),E[l]){var S=E[l];if(S&&(S.loaded||S.errored)){this.asyncScriptLoaderHandleLoad(S);return}S.observers[h]=function(N){return c.asyncScriptLoaderHandleLoad(N)};return}var j={};j[h]=function(N){return c.asyncScriptLoaderHandleLoad(N)},E[l]={loaded:!1,observers:j};var T=document.createElement("script");T.src=l,T.async=!0;for(var o in t.attributes)T.setAttribute(o,t.attributes[o]);g&&(T.id=g);var P=function(L){if(E[l]){var V=E[l],A=V.observers;for(var F in A)L(A[F])&&delete A[F]}};R&&typeof window<"u"&&(window[R]=function(){return c.asyncScriptLoaderTriggerOnScriptLoaded()}),T.onload=function(){var N=E[l];N&&(N.loaded=!0,P(function(L){return R?!1:(L(N),!0)}))},T.onerror=function(){var N=E[l];N&&(N.errored=!0,P(function(L){return L(N),!0}))},document.body.appendChild(T)},p.componentWillUnmount=function(){var c=this.__scriptURL;if(t.removeOnUnmount===!0)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h+=1)l[h].src.indexOf(c)>-1&&l[h].parentNode&&l[h].parentNode.removeChild(l[h]);var v=E[c];v&&(delete v.observers[this.asyncScriptLoaderGetScriptLoaderID()],t.removeOnUnmount===!0&&delete E[c])},p.render=function(){var c=t.globalName,l=this.props;l.asyncScriptOnLoad;var h=l.forwardedRef,v=Je(l,["asyncScriptOnLoad","forwardedRef"]);return c&&typeof window<"u"&&(v[c]=typeof window[c]<"u"?window[c]:void 0),v.ref=h,f.createElement(n,v)},x})(f.Component),b=f.forwardRef(function(d,x){return f.createElement(s,X({},d,{forwardedRef:x}))});return b.displayName="AsyncScriptLoader("+i+")",b.propTypes={asyncScriptOnLoad:O.func},ze(b,n)}}var Z="onloadcallback",Ze="grecaptcha";function ee(){return typeof window<"u"&&window.recaptchaOptions||{}}function et(){var e=ee(),t=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+t+"/recaptcha/enterprise.js?onload="+Z+"&render=explicit":"https://"+t+"/recaptcha/api.js?onload="+Z+"&render=explicit"}const tt=Xe(et,{callbackName:Z,globalName:Ze,attributes:ee().nonce?{nonce:ee().nonce}:{}})(U),le=({index:e,guest:t,onUpdate:a,onRemove:n,onConfirm:i,isDraft:s=!1,isRostered:b=!1})=>{const{t:d}=te(["rsvp"]),[x,p]=f.useState(!1),[u,c]=f.useState(!1),[l,h]=f.useState(!1),v=f.useRef(null),w=t.firstName.trim()&&t.lastName.trim(),R=(g,S)=>{a?.(e,g,S)};return f.useEffect(()=>{t.dietary&&p(!0),t.note&&c(!0)},[t.dietary,t.note]),f.useEffect(()=>{const g=S=>{v.current&&!v.current.contains(S.target)&&h(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),r.jsxs(k.div,{className:`guest-card ${w?"":"invalid"}`,layout:!0,initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.2},children:[r.jsxs("div",{children:[r.jsxs("div",{className:"form-row",children:[r.jsx("input",{type:"text",placeholder:d("rsvp:firstName"),value:t.firstName,onChange:g=>R("firstName",g.target.value)}),r.jsx("input",{type:"text",placeholder:d("rsvp:lastName"),value:t.lastName,onChange:g=>R("lastName",g.target.value)})]}),r.jsxs(M,{children:[x&&r.jsxs(k.div,{className:"form-row",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[r.jsx("input",{type:"text",placeholder:d("rsvp:dietaryPlaceholder"),value:t.dietary,onChange:g=>R("dietary",g.target.value)}),s&&r.jsx("button",{type:"button",className:"remove-guest",onClick:()=>p(!1),children:"×"})]}),u&&r.jsxs(k.div,{className:"form-row",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[r.jsx("textarea",{placeholder:d("rsvp:notePlaceholder"),value:t.note||"",onChange:g=>R("note",g.target.value)}),s&&r.jsx("button",{type:"button",className:"remove-guest",onClick:()=>c(!1),children:"×"})]})]})]}),r.jsx("div",{className:"guest-card-actions",children:s?r.jsxs(r.Fragment,{children:[r.jsx(k.button,{type:"button",className:"form-btn add-guest-btn",disabled:!w,onClick:()=>{i&&i(),h(!1),p(!1),c(!1)},whileHover:w?{scale:1.02}:{},title:d("rsvp:addGuest"),children:r.jsx($.Add,{})}),r.jsx(M,{children:l&&r.jsxs(k.div,{className:"dropdown-menu",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[r.jsx("button",{type:"button",onClick:()=>{p(!0),h(!1)},children:d("rsvp:dietary")}),r.jsx("button",{type:"button",onClick:()=>{c(!0),h(!1)},children:d("rsvp:note")})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"three-dots-btn",onClick:()=>h(g=>!g),children:r.jsx($.More,{})}),r.jsx("button",{type:"button",className:"remove-guest",onClick:()=>{window.confirm(`Are you sure you want to remove ${t.firstName} ${t.lastName} from the guest roster?`)&&n?.(e)},children:r.jsx($.Close,{})})]})})]})},de={firstName:"",lastName:"",dietary:"",note:""},rt=({guests:e,onGuestsChange:t})=>{const{t:a}=te(["rsvp"]),[n,i]=f.useState(de),s=f.useCallback(()=>{!n.firstName.trim()||!n.lastName.trim()||(t([...e,n]),i(de))},[n,e,t]),b=f.useCallback(p=>{t(e.filter((u,c)=>c!==p))},[e,t]),d=f.useCallback((p,u,c)=>{t(e.map((l,h)=>h===p?{...l,[u]:c}:l))},[e,t]),x=f.useCallback((p,u)=>{i(c=>({...c,[p]:u}))},[]);return r.jsxs("div",{className:"guests-section",children:[r.jsxs("h3",{children:[a("rsvp:guestsTitle"),e.length>0&&` (${e.length})`]}),r.jsxs(M,{children:[e.map((p,u)=>r.jsx(le,{index:u,guest:p,onUpdate:d,onRemove:b,isRostered:!0},`roster-${u}`)),r.jsx(le,{index:e.length,guest:n,onUpdate:(p,u,c)=>x(u,c),onConfirm:s,isDraft:!0},"draft")]})]})},nt="6Lcy_mcsAAAAADoT-ibwy1RvePEHG4xJ87D0fdse",q=["contactAndAttendance","guestsOrName","captcha","review"],it={0:"contactAndAttendance",1:"guestsOrName",2:"captcha",3:"review"},H={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},st=()=>{const{t:e,ready:t}=te(["home","common","rsvp"]),{locale:a}=Se(),[n,i]=f.useState(!1);f.useEffect(()=>i(!0),[]);const[s,b]=f.useState({email:"",attending:"",guests:[],nonAttendingName:"",notes:"",website:"",captchaAnswer:""}),[d,x]=f.useState(0),[p,u]=f.useState(!1),[c,l]=f.useState(null),[h,v]=f.useState(!1),[w,R]=f.useState(null),[g]=f.useState(Date.now()),S=f.useRef(null),j=f.useRef(null),T=f.useRef(null);if(f.useEffect(()=>{c&&S.current&&S.current.focus(),p&&j.current&&j.current.focus()},[c,p]),!t)return r.jsx("div",{className:"loading",children:e("common:loading")});const o=y=>y.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y)?null:e("rsvp:errors.invalidEmail"):e("rsvp:errors.required"),P=s.guests.some(y=>!y.firstName.trim()||!y.lastName.trim()),N=()=>{switch(d){case 0:return!o(s.email)&&!!s.attending;case 1:return s.attending==="yes"?s.guests.length>0&&!P:!!s.nonAttendingName?.trim()&&!!s.notes?.trim();case 2:return s.captchaAnswer?.trim()==="7"&&!!w;default:return!0}},L=y=>{const{name:C,value:B}=y.target;b(je=>({...je,[C]:B})),c&&l(null)},V=()=>{if(!N()){d===1&&s.attending==="yes"&&s.guests.length===0?l(e("rsvp:errors.addAtLeastOneGuest")):l(e("rsvp:errors.required"));return}l(null),x(y=>Math.min(y+1,q.length-1))},A=()=>{l(null),x(y=>Math.max(y-1,0))},F=async()=>{if(l(null),s.website)return l("Bot detected.");if(Date.now()-g<2e3)return l("Submission too fast.");if(!w)return l("Please complete reCAPTCHA.");v(!0);try{const y=s.attending==="yes"?s.guests.map((C,B)=>`${B+1}. ${C.firstName} ${C.lastName}`+(C.dietary?` - Dietary: ${C.dietary}`:"")+(C.note?` - Note: ${C.note}`:"")).join(`
`):`Not attending: ${s.nonAttendingName}`;await Ie.send("service_vvuhisc","template_4m25aki",{email:s.email,attending:s.attending,guestsCount:s.attending==="yes"?s.guests.length:1,guests:y,notes:s.notes||"None",recaptchaToken:w},"gVksEDEDoKBjB0TJU"),u(!0)}catch(y){console.error(y),l(e("rsvp:errors.failed")),T.current?.reset(),R(null)}finally{v(!1)}};if(p)return r.jsxs("div",{className:"rsvp-page container",ref:j,tabIndex:-1,children:[r.jsx("h1",{children:e("rsvp:thankYou")}),r.jsx("p",{children:e("rsvp:confirmation")})]});const xe=(d+1)/q.length*100;return r.jsxs("div",{className:"rsvp-page container",children:[r.jsx("h1",{children:e("rsvp:title")}),r.jsx("p",{className:"step-description",children:e(`rsvp:steps.${it[d]}`)}),r.jsxs("form",{className:"rsvp-form",onSubmit:y=>y.preventDefault(),children:[r.jsxs(M,{mode:"wait",children:[d===0&&r.jsxs(k.div,{variants:H,initial:"initial",animate:"animate",exit:"exit",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:[e("rsvp:email")," ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:L,className:`form-input ${s.email.trim()?o(s.email)?"form-input-invalid":"form-input-valid":""}`,required:!0,autoComplete:"email"}),s.email&&o(s.email)&&r.jsx("div",{className:"field-error",children:o(s.email)})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"attending",children:[e("rsvp:attending")," ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{id:"attending",name:"attending",value:s.attending,onChange:L,className:`form-input ${s.attending?"form-input-valid":""}`,required:!0,autoComplete:"off",children:[r.jsx("option",{value:"",children:e("rsvp:select")}),r.jsx("option",{value:"yes",children:e("rsvp:yes")}),r.jsx("option",{value:"no",children:e("rsvp:no")})]})]})]},"step0"),d===1&&r.jsx(k.div,{variants:H,initial:"initial",animate:"animate",exit:"exit",children:s.attending==="yes"?r.jsx(rt,{guests:s.guests,onGuestsChange:y=>b(C=>({...C,guests:y})),required:!0}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"nonAttendingName",children:[e("rsvp:yourName")," ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{id:"nonAttendingName",name:"nonAttendingName",type:"text",value:s.nonAttendingName,onChange:L,className:"form-input",required:!0,autoComplete:"name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"notes",children:[e("rsvp:messageToBrideGroom")," ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("textarea",{id:"notes",name:"notes",value:s.notes,onChange:L,className:"form-input",placeholder:e("rsvp:messagePlaceholder"),rows:5,required:!0})]})]})},"guestsOrName"),d===2&&n&&r.jsxs(k.div,{variants:H,initial:"initial",animate:"animate",exit:"exit",children:[s.attending==="yes"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"notes",children:e("rsvp:messageToBrideGroom")}),r.jsx("textarea",{id:"notes",name:"notes",value:s.notes,onChange:L,className:"form-input",placeholder:e("rsvp:messagePlaceholder"),rows:5})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"captchaAnswer",children:["What is 3 + 4? ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{id:"captchaAnswer",name:"captchaAnswer",type:"text",value:s.captchaAnswer,onChange:L,className:`form-input ${s.captchaAnswer?.trim()==="7"?"form-input-valid":s.captchaAnswer?.trim()?"form-input-invalid":""}`,required:!0}),s.captchaAnswer?.trim()&&s.captchaAnswer?.trim()!=="7"&&r.jsx("div",{className:"field-error",children:"Answer must be 7"})]}),r.jsx(tt,{sitekey:nt,onChange:y=>R(y),ref:T,style:{display:"inline-block",width:"100%",marginTop:"1rem"}}),!w&&c&&r.jsx("div",{className:"field-error",children:"Please complete reCAPTCHA"})]},"step3"),d===3&&r.jsx(k.div,{variants:H,initial:"initial",animate:"animate",exit:"exit",children:r.jsxs("div",{className:"review",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[e("rsvp:email"),":"]})," ",s.email]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[e("rsvp:attending"),":"]})," ",e(`rsvp:${s.attending}`)]}),s.attending==="yes"&&s.guests.length>0&&r.jsxs("div",{children:[r.jsxs("strong",{children:[e("rsvp:guestsTitle"),":"]}),r.jsx("ul",{children:s.guests.map((y,C)=>r.jsxs("li",{children:[y.firstName," ",y.lastName,y.dietary&&` - ${e("rsvp:dietary")}: ${y.dietary}`,y.note&&` - ${e("rsvp:guestNote")}: ${y.note}`]},C))})]}),s.attending==="no"&&r.jsxs("p",{children:[r.jsxs("strong",{children:[e("rsvp:name"),":"]})," ",s.nonAttendingName]}),s.notes&&r.jsxs("p",{children:[r.jsxs("strong",{children:[e("rsvp:messageToBrideGroom"),":"]})," ",s.notes]})]})},"step4")]}),c&&r.jsx("div",{className:"rsvp-error",ref:S,tabIndex:-1,role:"alert",children:c}),r.jsxs("div",{children:[r.jsxs("div",{className:"form-navigation",children:[r.jsx("div",{className:"progress-bar",children:r.jsx("div",{className:"progress-bar-fill",style:{width:`${xe}%`}})}),d+1,"/",q.length-1]}),r.jsxs("div",{children:[r.jsx("button",{type:"button",onClick:A,disabled:d===0,title:e("rsvp:back"),children:r.jsx($.Back,{})}),d<q.length-1?r.jsx("button",{type:"button",disabled:!N(),onClick:V,title:e("rsvp:next"),children:r.jsx($.Next,{})}):r.jsx("button",{type:"button",onClick:F,disabled:h,children:e(h?"rsvp:sending":"rsvp:submit")})]})]})]})]})},ut=we(st);export{ut as default};
