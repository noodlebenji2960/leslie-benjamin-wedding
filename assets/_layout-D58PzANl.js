import{p as k,a as i,t as S,w as I,v as R,x as C}from"./chunk-EPOLDU6W-Br5zSlye.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{u as M}from"./useWeddingData-r-7mEpNk.js";import{C as O,u as B,R as H}from"./lenis-react-DH9smvPB.js";import{u as y}from"./useTranslation-Dooh0bhE.js";import{A as N,m as L}from"./proxy-FoKYuW4K.js";import{u as A}from"./LanguageContext-rXhi94ZD.js";import{u as P}from"./ThemeContext-ChVsE47-.js";function q({locale:a,links:t,buildLink:s}){const{t:c}=y(["common"]),r=k(),u=i.useRef(null),[m,g]=i.useState({left:0,width:0}),[f,x]=i.useState(!1),o=M(),l=(n=>n.replace(/^\/(en|es)/,"")||"/")(r.pathname),h=l==="/"||l==="",v=n=>{if(!u.current)return;const d=u.current.querySelectorAll(".nav-link")[n];if(!d)return;const T=u.current.getBoundingClientRect(),E=d.getBoundingClientRect();g({left:E.left-T.left,width:E.width})};i.useEffect(()=>{if(f)return;const n=t.findIndex(d=>d.path==="/"?h:l===d.path);n!==-1&&v(n)},[r.pathname,a,f]);const p=n=>{x(!0),v(n)},j=()=>{x(!1)},$=`${o.bride.firstName} & ${o.groom.firstName}`;return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"nav",children:[e.jsx(N,{children:!h&&e.jsx(L.div,{className:"logo-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},children:e.jsx(S,{to:s("/"),className:"logo",children:e.jsx("h1",{children:$})})})}),e.jsx(N,{children:!h&&e.jsx(L.div,{className:"nav-countdown",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},children:e.jsx(O,{size:"sm",date:o.wedding.date,time:o.wedding.ceremony.time})})}),e.jsxs("div",{className:"nav-links desktop",ref:u,children:[t.map((n,d)=>e.jsx(S,{to:s(n.path),className:"nav-link",onMouseEnter:()=>p(d),onMouseLeave:j,children:n.label},n.path)),e.jsx("div",{className:"nav-indicator",style:{transform:`translateX(${m.left}px)`,width:m.width}})]})]})})}function W({currentLocale:a,onSwitch:t,isPending:s}){return e.jsx("button",{className:"language-switcher",onClick:t,disabled:s,"aria-label":`Switch to ${a==="es"?"English":"Spanish"}`,children:e.jsxs("div",{className:"language-icons",children:[e.jsx("span",{className:`language-label ${a==="es"?"active":""}`,children:"ES"}),e.jsx("span",{className:`language-label ${a==="en"?"active":""}`,children:"EN"})]})})}const w=["light","dark"],D={light:"Light mode",dark:"Dark mode"};function _(){const{theme:a,setTheme:t}=P(),s=w.indexOf(a),c=()=>{const r=(s+1)%w.length;t(w[r])};return e.jsx("button",{className:"theme-toggle-slider",onClick:c,"aria-label":`${D[a]}. Click to switch theme.`,children:e.jsxs("div",{className:"toggle-icons",children:[e.jsx("span",{className:`icon sun ${a==="light"?"active":""}`,children:"☀︎"}),e.jsx("span",{className:`icon moon ${a==="dark"?"active":""}`,children:"⏾"})]})})}function z({onClick:a}){const[t,s]=i.useState(!1);return i.useEffect(()=>{const c=()=>{s(window.scrollY>5)};return c(),window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]),e.jsx("button",{className:`back-to-top ${t?"visible":""}`,onClick:a,"aria-label":"Back to top",children:"↑"})}const U=I(function(){const t=k(),s=R(),c=C(),[r,u]=i.useTransition(),{locale:m,switchLanguage:g}=A(),[f,x]=i.useState(!1),{t:o}=y(["common"]),b=i.useRef(null),l=B(()=>{});i.useEffect(()=>{l?.scrollTo(0,{immediate:!0})},[t.pathname,l]);const h=[{path:"/",label:o("nav.home")},{path:"/rsvp",label:o("nav.rsvp")},{path:"/schedule",label:o("nav.schedule")},{path:"/qa",label:o("nav.qa")}],v=p=>`/${m}${p==="/"?"":p}`;return i.useEffect(()=>{if(!(t.pathname.startsWith("/en")||t.pathname.startsWith("/es"))){const j=localStorage.getItem("preferred-language")||"es";s(`/${j}${t.pathname}`,{replace:!0})}},[t.pathname,s]),e.jsx(H,{root:!0,children:e.jsxs("div",{className:"container",children:[e.jsx(q,{menuOpen:f,setMenuOpen:x,locale:m,links:h,buildLink:v,onLanguageSwitch:()=>u(g),isPending:r,hamburgerRef:b}),e.jsxs("main",{className:"main",children:[e.jsx(N,{mode:"wait",children:e.jsxs(L.div,{className:"page-content",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},children:[c," "]},t.pathname)}),e.jsxs("div",{className:"fixed-container",children:[e.jsx(W,{currentLocale:m,onSwitch:g,isPending:r}),e.jsxs("div",{className:"group",children:[e.jsx(z,{onClick:()=>l?.scrollTo(0,{duration:1})}),e.jsx(_,{})]})]})]})]})})});export{U as default};
