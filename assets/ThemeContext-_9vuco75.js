import{j as d}from"./jsx-runtime-u17CrQMm.js";import{a as t}from"./chunk-EPOLDU6W-BnKKP6Ue.js";import{b as f}from"./SessionContext-zqiVhUqH.js";const i=t.createContext(void 0);function v({children:r}){const{cookiePreference:u}=f(),o=u?.personalization??!1,[e,n]=t.useState("system"),[m,a]=t.useState(!1);return t.useEffect(()=>{if(o&&!m){const s=localStorage.getItem("theme");s&&n(s),a(!0)}o||a(!1)},[o,m]),t.useEffect(()=>{e==="system"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",e),o&&localStorage.setItem("theme",e)},[e,o]),t.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{e==="system"&&document.documentElement.removeAttribute("data-theme")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[e]),d.jsx(i.Provider,{value:{theme:e,setTheme:n},children:r})}const p=()=>{const r=t.useContext(i);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r};export{v as T,p as u};
