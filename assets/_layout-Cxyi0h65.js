import{q as S,a as i,p as e,x as E,w as I,v as R,y as C}from"./chunk-EPOLDU6W-C6HH8JUa.js";import{u as M}from"./useWeddingData-r-7mEpNk.js";import{C as O,u as B,R as H}from"./lenis-react-CAzqC1Hc.js";import{u as k}from"./useTranslation-CxQEQNrh.js";import{A as N,m as L}from"./proxy-CkUqjS-P.js";import{u as q}from"./LanguageContext-CdT15PM-.js";import{u as A}from"./ThemeContext-25bXO-kY.js";function P({locale:a,links:t,buildLink:s}){const{t:c}=k(["common"]),l=S(),u=i.useRef(null),[m,g]=i.useState({left:0,width:0}),[f,x]=i.useState(!1),o=M(),r=(n=>n.replace(/^\/(en|es)/,"")||"/")(l.pathname),h=r==="/"||r==="",v=n=>{if(!u.current)return;const d=u.current.querySelectorAll(".nav-link")[n];if(!d)return;const T=u.current.getBoundingClientRect(),y=d.getBoundingClientRect();g({left:y.left-T.left,width:y.width})};i.useEffect(()=>{if(f)return;const n=t.findIndex(d=>d.path==="/"?h:r===d.path);n!==-1&&v(n)},[l.pathname,a,f]);const p=n=>{x(!0),v(n)},j=()=>{x(!1)},$=`${o.bride.firstName} & ${o.groom.firstName}`;return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"nav",children:[e.jsx(N,{children:!h&&e.jsx(L.div,{className:"logo-container",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},children:e.jsx(E,{to:s("/"),className:"logo",children:e.jsx("h1",{children:$})})})}),e.jsx(N,{children:!h&&e.jsx(L.div,{className:"nav-countdown",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},children:e.jsx(O,{size:"sm",date:o.wedding.date,time:o.wedding.ceremony.time})})}),e.jsxs("div",{className:"nav-links desktop",ref:u,children:[t.map((n,d)=>e.jsx(E,{to:s(n.path),className:"nav-link",onMouseEnter:()=>p(d),onMouseLeave:j,children:n.label},n.path)),e.jsx("div",{className:"nav-indicator",style:{transform:`translateX(${m.left}px)`,width:m.width}})]})]})})}function W({currentLocale:a,onSwitch:t,isPending:s}){return e.jsx("button",{className:"language-switcher",onClick:t,disabled:s,"aria-label":`Switch to ${a==="es"?"English":"Spanish"}`,children:e.jsxs("div",{className:"language-icons",children:[e.jsx("span",{className:`language-label ${a==="es"?"active":""}`,children:"ES"}),e.jsx("span",{className:`language-label ${a==="en"?"active":""}`,children:"EN"})]})})}const w=["light","dark"],D={light:"Light mode",dark:"Dark mode"};function _(){const{theme:a,setTheme:t}=A(),s=w.indexOf(a),c=()=>{const l=(s+1)%w.length;t(w[l])};return e.jsx("button",{className:"theme-toggle-slider",onClick:c,"aria-label":`${D[a]}. Click to switch theme.`,children:e.jsxs("div",{className:"toggle-icons",children:[e.jsx("span",{className:`icon sun ${a==="light"?"active":""}`,children:"☀︎"}),e.jsx("span",{className:`icon moon ${a==="dark"?"active":""}`,children:"⏾"})]})})}function z({onClick:a}){const[t,s]=i.useState(!1);return i.useEffect(()=>{const c=()=>{s(window.scrollY>5)};return c(),window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]),e.jsx("button",{className:`back-to-top ${t?"visible":""}`,onClick:a,"aria-label":"Back to top",children:"↑"})}const Q=I(function(){const t=S(),s=R(),c=C(),[l,u]=i.useTransition(),{locale:m,switchLanguage:g}=q(),[f,x]=i.useState(!1),{t:o}=k(["common"]),b=i.useRef(null),r=B(()=>{});i.useEffect(()=>{r?.scrollTo(0,{immediate:!0})},[t.pathname,r]);const h=[{path:"/",label:o("nav.home")},{path:"/rsvp",label:o("nav.rsvp")},{path:"/schedule",label:o("nav.schedule")},{path:"/qa",label:o("nav.qa")}],v=p=>`/${m}${p==="/"?"":p}`;return i.useEffect(()=>{if(!(t.pathname.startsWith("/en")||t.pathname.startsWith("/es"))){const j=localStorage.getItem("preferred-language")||"es";s(`/${j}${t.pathname}`,{replace:!0})}},[t.pathname,s]),e.jsx(H,{root:!0,children:e.jsxs("div",{className:"container",children:[e.jsx(P,{menuOpen:f,setMenuOpen:x,locale:m,links:h,buildLink:v,onLanguageSwitch:()=>u(g),isPending:l,hamburgerRef:b}),e.jsxs("main",{className:"main",children:[e.jsx(N,{mode:"wait",children:e.jsxs(L.div,{className:"page-content",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},children:[c," "]},t.pathname)}),e.jsxs("div",{className:"fixed-container",children:[e.jsx(W,{currentLocale:m,onSwitch:g,isPending:l}),e.jsxs("div",{className:"group",children:[e.jsx(z,{onClick:()=>r?.scrollTo(0,{duration:1})}),e.jsx(_,{})]})]})]})]})})});export{Q as default};
