const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D0_Qe6CK.js","assets/chunk-EPOLDU6W-BvhK-deF.js","assets/leaflet-src-B6MWNhrb.js","assets/index-BnyVEvva.js","assets/leaflet-CIGW-MKW.css","assets/leaflet-routing-machine-BkNEgVwj.js","assets/leaflet-routing-machine-1NKW7b23.css"])))=>i.map(i=>d[i]);
import{a as u,p as c}from"./chunk-EPOLDU6W-BvhK-deF.js";const S="modulepreload",j=function(m){return"/"+m},L={},h=function(s,a,R){let _=Promise.resolve();if(a&&a.length>0){let E=function(o){return Promise.all(o.map(n=>Promise.resolve(n).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),r=l?.nonce||l?.getAttribute("nonce");_=E(a.map(o=>{if(o=j(o),o in L)return;L[o]=!0;const n=o.endsWith(".css"),f=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${f}`))return;const e=document.createElement("link");if(e.rel=n?"stylesheet":S,n||(e.as="script"),e.crossOrigin="",e.href=o,r&&e.setAttribute("nonce",r),document.head.appendChild(e),n)return new Promise((b,v)=>{e.addEventListener("load",b),e.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${o}`)))})}))}function y(l){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l}return _.then(l=>{for(const r of l||[])r.status==="rejected"&&y(r.reason);return s().catch(y)})},I=({label:m,coordinates:s,extraCoordinates:a,mapUrl:R,width:_="100%",height:y="300px",showRoute:l=!1,interactive:r=!1,zoom:E,style:o})=>{const[n,f]=u.useState(null),[e,b]=u.useState(null),[v,P]=u.useState(!1),g=u.useRef(null),d=u.useRef(null);if(u.useEffect(()=>{(async()=>{const[t,i]=await Promise.all([h(()=>import("./index-D0_Qe6CK.js"),__vite__mapDeps([0,1,2,3])),h(()=>import("./leaflet-src-B6MWNhrb.js").then(p=>p.l),__vite__mapDeps([2,1])),h(()=>Promise.resolve({}),__vite__mapDeps([4]))]);f(t),b(i.default)})()},[]),u.useEffect(()=>{!e||!l||(async()=>{await Promise.all([h(()=>import("./leaflet-routing-machine-BkNEgVwj.js").then(p=>p.l),__vite__mapDeps([5,1])),h(()=>Promise.resolve({}),__vite__mapDeps([6]))]);let t=0;const i=setInterval(()=>{(e.Routing||window.L?.Routing)&&(e.Routing||(e.Routing=window.L.Routing),P(!0),clearInterval(i)),t++,t>20&&clearInterval(i)},100)})()},[e,l]),u.useEffect(()=>{const t=setInterval(()=>{const i=document.querySelector(".leaflet-control-attribution.leaflet-control");i&&(i.remove(),clearInterval(t))},100);return()=>clearInterval(t)},[]),u.useEffect(()=>{if(!(!v||!e||!g.current||!l||!a?.length)){d.current&&(d.current.remove(),d.current=null);try{const t=g.current,i=[e.latLng(s.lat,s.lng),e.latLng(a[0].lat,a[0].lng)];d.current=e.Routing.control({waypoints:i,routeWhileDragging:!1,show:!1,addWaypoints:!1,draggableWaypoints:!1,createMarker:()=>null,lineOptions:{styles:[{color:"var(--color-primary)",weight:4}],extendToWaypoints:!0,missingRouteTolerance:0}}).addTo(t),setTimeout(()=>{const p=document.querySelector(".leaflet-routing-container");p&&(p.style.display="none")},100)}catch(t){console.error("Failed to add routing:",t)}return()=>{d.current&&(d.current.remove(),d.current=null)}}},[v,e,l,s,a]),!n||!e)return null;const w=a?[s,...a]:[s],k=E!==void 0?{center:[s.lat,s.lng],zoom:E}:{bounds:w.map(t=>[t.lat,t.lng]),boundsOptions:{padding:[50,50]}};return c.jsxs(n.MapContainer,{ref:g,...k,style:{...o,width:_,height:y,borderRadius:"8px"},scrollWheelZoom:!1,dragging:r,touchZoom:r,doubleClickZoom:r,boxZoom:r,keyboard:r,zoomControl:r,whenReady:()=>{g.current&&g.current.invalidateSize()},children:[c.jsx(n.TileLayer,{url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",attribution:""}),c.jsx(n.Marker,{position:[s.lat,s.lng],children:c.jsx(n.Popup,{children:R&&c.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",children:m&&c.jsx("div",{className:"map-label",children:m})})})}),a?.map((t,i)=>t.showMarker!==!1?c.jsx(n.Marker,{position:[t.lat,t.lng],children:c.jsx(n.Popup,{children:t.label||"Additional location"})},i):null)]})};export{I as M};
