const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-doFnn10i.js","assets/chunk-EPOLDU6W-C9vtjoJn.js","assets/leaflet-src-BnrIhIxF.js","assets/index-Dk-4uFdp.js","assets/leaflet-CIGW-MKW.css","assets/leaflet-routing-machine-CYgo1Oha.js"])))=>i.map(i=>d[i]);
import{j as a}from"./jsx-runtime-u17CrQMm.js";import{a as i}from"./chunk-EPOLDU6W-C9vtjoJn.js";import{I as S}from"./Icon-CkrLgVM2.js";const I="modulepreload",O=function(d){return"/"+d},j={},v=function(u,o,L){let y=Promise.resolve();if(o&&o.length>0){let p=function(s){return Promise.all(s.map(r=>Promise.resolve(r).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");y=p(o.map(s=>{if(s=O(s),s in j)return;j[s]=!0;const r=s.endsWith(".css"),f=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${f}`))return;const e=document.createElement("link");if(e.rel=r?"stylesheet":I,r||(e.as="script"),e.crossOrigin="",e.href=s,l&&e.setAttribute("nonce",l),document.head.appendChild(e),r)return new Promise((w,E)=>{e.addEventListener("load",w),e.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${s}`)))})}))}function _(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return y.then(c=>{for(const l of c||[])l.status==="rejected"&&_(l.reason);return u().catch(_)})},N=({label:d,coordinates:u,extraCoordinates:o,mapUrl:L,width:y="100%",height:_="300px",showRoute:c=!1,interactive:l=!1,zoom:p,style:s})=>{const[r,f]=i.useState(null),[e,w]=i.useState(null),[E,x]=i.useState(!1),m=i.useRef(null),g=i.useRef(null),t=i.useMemo(()=>{if(!u)return null;try{return typeof u=="string"?JSON.parse(u):u}catch(n){return console.error("Map Error: Invalid coordinates format",n),null}},[u]);i.useEffect(()=>{let n=!0;return(async()=>{const[k,M]=await Promise.all([v(()=>import("./index-doFnn10i.js"),__vite__mapDeps([0,1,2,3])),v(()=>import("./leaflet-src-BnrIhIxF.js").then(h=>h.l),__vite__mapDeps([2,1])),v(()=>Promise.resolve({}),__vite__mapDeps([4]))]);if(n){const h=M.default;delete h.Icon.Default.prototype._getIconUrl,h.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),f(k),w(h)}})(),()=>{n=!1}},[]),i.useEffect(()=>{!e||!c||v(()=>import("./leaflet-routing-machine-CYgo1Oha.js").then(n=>n.l),__vite__mapDeps([5,1])).then(()=>{x(!0)})},[e,c]),i.useEffect(()=>{if(!E||!e||!m.current||!t||!o?.length)return;g.current&&g.current.remove();const n=[e.latLng(t.lat,t.lng),e.latLng(o[0].lat,o[0].lng)];return g.current=e.Routing.control({waypoints:n,addWaypoints:!1,draggableWaypoints:!1,show:!1,createMarker:()=>null,lineOptions:{styles:[{color:"var(--color-primary)",weight:4}]}}).addTo(m.current),()=>{g.current&&g.current.remove()}},[E,e,t,o]);const P=!r||!e||!t,R=i.useMemo(()=>t?o?[{lat:t.lat,lng:t.lng},...o]:[{lat:t.lat,lng:t.lng}]:[],[t,o]),b=i.useMemo(()=>t?p!==void 0?{center:[t.lat,t.lng],zoom:p}:{bounds:R.map(n=>[n.lat,n.lng]),boundsOptions:{padding:[40,40]}}:{},[t,p,R]);return a.jsx("div",{className:"map-container-wrapper",style:{...s,width:y,height:_,position:"relative",overflow:"hidden",borderRadius:"8px"},children:P?a.jsx("div",{className:"map-loading-placeholder",style:{width:"100%",height:"100%",background:"#f8f8f8",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontSize:"0.9rem"},children:a.jsx("span",{children:"Loading Map..."})}):a.jsxs(r.MapContainer,{ref:m,...b,style:{width:"100%",height:"100%"},scrollWheelZoom:!1,dragging:l,zoomControl:l,attributionControl:!1,whenReady:()=>{setTimeout(()=>{m.current&&m.current.invalidateSize()},400)},children:[a.jsx(r.TileLayer,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:""}),a.jsx(r.Marker,{position:[t.lat,t.lng],children:a.jsx(r.Popup,{closeButton:!1,children:L?a.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit",fontWeight:"bold"},children:[d||"View Location"," ",a.jsx(S.ExternalLink,{size:16})]}):d})}),o?.map((n,k)=>n.showMarker!==!1&&a.jsx(r.Marker,{position:[n.lat,n.lng],children:a.jsx(r.Popup,{children:n.label||"Additional location"})},k))]})})};export{N as M};
