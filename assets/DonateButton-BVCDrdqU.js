const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C7jJI0JH.js","assets/chunk-LFPYN7LY-BSAdruXa.js","assets/leaflet-src-CG7mWXpw.js","assets/index-DGxbUKOO.js","assets/leaflet-CIGW-MKW.css","assets/leaflet-routing-machine-BpE_tFf8.js"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime-u17CrQMm.js";import{a as i}from"./chunk-LFPYN7LY-BSAdruXa.js";import{I}from"./lenis-react-fYMU8h9a.js";import{m as L,M as N}from"./Modal-B_T2LsLg.js";import{c as O}from"./ConfigContext-B7dQSa9c.js";const T="modulepreload",U=function(p){return"/"+p},P={},x=function(d,t,h){let m=Promise.resolve();if(t&&t.length>0){let g=function(l){return Promise.all(l.map(o=>Promise.resolve(o).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),a=u?.nonce||u?.getAttribute("nonce");m=g(t.map(l=>{if(l=U(l),l in P)return;P[l]=!0;const o=l.endsWith(".css"),f=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const n=document.createElement("link");if(n.rel=o?"stylesheet":T,o||(n.as="script"),n.crossOrigin="",n.href=l,a&&n.setAttribute("nonce",a),document.head.appendChild(n),o)return new Promise((w,v)=>{n.addEventListener("load",w),n.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function c(u){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=u,window.dispatchEvent(a),!a.defaultPrevented)throw u}return m.then(u=>{for(const a of u||[])a.status==="rejected"&&c(a.reason);return d().catch(c)})},B=({label:p,coordinates:d,extraCoordinates:t,mapUrl:h,width:m="100%",height:c="300px",showRoute:u=!1,interactive:a=!1,zoom:g,style:l})=>{const[o,f]=i.useState(null),[n,w]=i.useState(null),[v,R]=i.useState(!1),_=i.useRef(null),y=i.useRef(null),r=i.useMemo(()=>{if(!d)return null;try{return typeof d=="string"?JSON.parse(d):d}catch(s){return console.error("Map Error: Invalid coordinates format",s),null}},[d]);i.useEffect(()=>{let s=!0;return(async()=>{const[E,S]=await Promise.all([x(()=>import("./index-C7jJI0JH.js"),__vite__mapDeps([0,1,2,3])),x(()=>import("./leaflet-src-CG7mWXpw.js").then(j=>j.l),__vite__mapDeps([2,1])),x(()=>Promise.resolve({}),__vite__mapDeps([4]))]);if(s){const j=S.default;delete j.Icon.Default.prototype._getIconUrl,j.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),f(E),w(j)}})(),()=>{s=!1}},[]),i.useEffect(()=>{!n||!u||x(()=>import("./leaflet-routing-machine-BpE_tFf8.js").then(s=>s.l),__vite__mapDeps([5,1])).then(()=>{R(!0)})},[n,u]),i.useEffect(()=>{if(!v||!n||!_.current||!r||!t?.length)return;y.current&&y.current.remove();const s=[n.latLng(r.lat,r.lng),n.latLng(t[0].lat,t[0].lng)];return y.current=n.Routing.control({waypoints:s,addWaypoints:!1,draggableWaypoints:!1,show:!1,createMarker:()=>null,lineOptions:{styles:[{color:"var(--color-primary)",weight:4}]}}).addTo(_.current),()=>{y.current&&y.current.remove()}},[v,n,r,t]);const b=!o||!n||!r,k=i.useMemo(()=>r?t?[{lat:r.lat,lng:r.lng},...t]:[{lat:r.lat,lng:r.lng}]:[],[r,t]),M=i.useMemo(()=>r?g!==void 0?{center:[r.lat,r.lng],zoom:g}:{bounds:k.map(s=>[s.lat,s.lng]),boundsOptions:{padding:[40,40]}}:{},[r,g,k]);return e.jsx("div",{className:"map-container-wrapper",style:{...l,width:m,height:c,position:"relative",overflow:"hidden",borderRadius:"8px"},children:b?e.jsx("div",{className:"map-loading-placeholder",style:{width:"100%",height:"100%",background:"#f8f8f8",display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontSize:"0.9rem"},children:e.jsx("span",{children:"Loading Map..."})}):e.jsxs(o.MapContainer,{ref:_,...M,style:{width:"100%",height:"100%"},scrollWheelZoom:!1,dragging:a,zoomControl:a,attributionControl:!1,whenReady:()=>{setTimeout(()=>{_.current&&_.current.invalidateSize()},400)},children:[e.jsx(o.TileLayer,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:""}),e.jsx(o.Marker,{position:[r.lat,r.lng],children:e.jsx(o.Popup,{closeButton:!1,children:h?e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit",fontWeight:"bold"},children:[p||"View Location"," ",e.jsx(I.ExternalLink,{size:16})]}):p})}),t?.map((s,E)=>s.showMarker!==!1&&e.jsx(o.Marker,{position:[s.lat,s.lng],children:e.jsx(o.Popup,{children:s.label||"Additional location"})},E))]})})},$=({amount:p,className:d=""})=>{const{t}=O(["common"]),[h,m]=i.useState(!1),c=new URL("https://www.paypal.com/donate");return c.searchParams.append("business","MVVJWUBMGV866"),c.searchParams.append("no_recurring","1"),c.searchParams.append("currency_code","EUR"),p&&c.searchParams.append("amount",p),e.jsxs(e.Fragment,{children:[e.jsx(L.button,{type:"button",className:`donate-container ${d}`,whileHover:{scale:1.02},whileTap:{scale:.98},title:t("donate.title"),onClick:()=>m(!0),children:e.jsx("div",{className:"donate-content",children:e.jsx("span",{className:"donate-text",children:t("click_here")})})}),e.jsx(N,{isOpen:h,onClose:()=>m(!1),children:e.jsxs("div",{className:"donate-modal",children:[e.jsx("h2",{children:t("donate.modal_title")}),e.jsx("p",{children:t("donate.message_1")}),e.jsx("p",{children:t("donate.message_2")}),e.jsx("p",{children:t("donate.message_3")}),e.jsx(L.a,{href:c.toString(),target:"_blank",rel:"noopener noreferrer",className:"paypal-link",whileHover:{scale:1.05},whileTap:{scale:.97},children:t("donate.paypal_cta")})]})})]})};export{$ as D,B as M};
