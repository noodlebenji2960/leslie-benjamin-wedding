import{p as L,a as i,t as S,w as k,v as y}from"./chunk-EPOLDU6W-BnKKP6Ue.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{C as T,u as I,R}from"./lenis-react-BG3rPLpT.js";import{u as b}from"./useTranslation-B9zSoiKr.js";import{u as $}from"./LanguageContext-Ds-fbCcn.js";import{u as C}from"./ThemeContext-DoUZAlbR.js";import{I as A}from"./Icon-CCUsaovU.js";import{u as M}from"./useWeddingData-DQXGzUEP.js";import{A as B,m as H}from"./proxy-DBX3VoSC.js";function O({locale:t,links:n,buildLink:o}){const{t:l}=b(["common"]),m=L(),a=i.useRef(null),[f,j]=i.useState({left:0,top:0,width:0}),[x,d]=i.useState(!1),r=(s=>s.replace(/^\/(en|es)/,"")||"/")(m.pathname),h=r==="/"||r==="",p=s=>{if(!a.current||!s)return;const c=a.current.getBoundingClientRect(),u=s.getBoundingClientRect();j({left:u.left-c.left,top:u.bottom-c.top-3,width:u.width})},v=s=>{d(!0),p(s)},N=()=>d(!1);return i.useEffect(()=>{if(x||!a.current)return;const s=Array.from(a.current.querySelectorAll(".nav-link")),c=n.findIndex(u=>u.path==="/"?h:r===u.path);c!==-1&&p(s[c])},[m.pathname,t,x,n,h,r]),i.useLayoutEffect(()=>{const s=()=>{if(!a.current)return;const c=Array.from(a.current.querySelectorAll(".nav-link")),u=n.findIndex(E=>E.path==="/"?h:r===E.path);u!==-1&&p(c[u])};return window.addEventListener("resize",s),s(),()=>window.removeEventListener("resize",s)},[n,h,r]),e.jsx("nav",{className:"nav",children:e.jsxs("div",{className:"nav-links desktop",ref:a,children:[n.map(s=>e.jsx(S,{to:o(s.path),className:"nav-link",ref:c=>{},onMouseEnter:c=>v(c.currentTarget),onMouseLeave:N,children:s.label},s.path)),e.jsx("div",{className:"nav-indicator",style:{transform:`translate(${f.left}px)`,width:f.width}})]})})}function q({currentLocale:t,onSwitch:n,isPending:o=!1}){return e.jsx("button",{className:"language-switcher",onClick:n,disabled:o,"aria-label":`Switch to ${t==="es"?"English":"Spanish"}`,children:e.jsxs("div",{className:"language-icons",children:[e.jsx("span",{className:`language-label ${t==="es"?"active":""}`,children:"ES"}),e.jsx("span",{className:`language-label ${t==="en"?"active":""}`,children:"EN"})]})})}const g=["light","dark"],z={light:"Light mode",dark:"Dark mode",system:"System"};function P(){const{theme:t,setTheme:n}=C(),o=g.indexOf(t),l=()=>{const m=(o+1)%g.length,a=g[m]??g[0];n(a)};return e.jsx("button",{className:"theme-toggle-slider",onClick:l,"aria-label":`${z[t]}. Click to switch theme.`,children:e.jsxs("div",{className:"toggle-icons",children:[e.jsx("span",{className:`icon sun ${t==="light"?"active":""}`,children:"☀︎"}),e.jsx("span",{className:`icon moon ${t==="dark"?"active":""}`,children:"⏾"})]})})}function D({onClick:t}){const[n,o]=i.useState(!1);return i.useEffect(()=>{const l=()=>{o(window.scrollY>150)};return l(),window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]),e.jsx("button",{className:`back-to-top ${n?"visible":""}`,onClick:t,"aria-label":"Back to top",children:e.jsx(A.Up,{})})}const _=()=>{const t=M();if(!t?.wedding)return null;const{date:n}=t.wedding,{time:o}=t.wedding.ceremony;return e.jsx("footer",{className:"footer",children:e.jsx("div",{className:"footer-content",children:e.jsx(T,{size:"sm",date:n,time:o})})})},X=k(function(){const n=L(),o=y(),[l,m]=i.useTransition(),{locale:a,switchLanguage:f}=$(),[j,x]=i.useState(!1),{t:d}=b(["common"]),w=i.useRef(null),r=I(()=>{});i.useEffect(()=>{r?.scrollTo(0,{immediate:!0})},[n.pathname,r]);const h=[{path:"/",label:d("nav.home")},{path:"/rsvp",label:d("nav.rsvp")},{path:"/schedule",label:d("nav.schedule")},{path:"/qa",label:d("nav.qa")}],p=v=>`/${a}${v==="/"?"":v}`;return e.jsx(R,{root:!0,children:e.jsxs("div",{className:"container",children:[e.jsx(O,{menuOpen:j,setMenuOpen:x,locale:a,links:h,buildLink:p,onLanguageSwitch:()=>m(f),isPending:l,hamburgerRef:w}),e.jsxs("main",{className:"main",children:[e.jsx(B,{mode:"wait",children:e.jsx(H.div,{className:"page-content",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},children:o},n.pathname)}),e.jsxs("div",{className:"fixed-container",children:[e.jsx(q,{currentLocale:a,onSwitch:f,isPending:l}),e.jsxs("div",{className:"group",children:[e.jsx(D,{onClick:()=>r?.scrollTo(0,{duration:1})}),e.jsx(P,{})]})]}),e.jsx(_,{})]})]})})});export{X as default};
